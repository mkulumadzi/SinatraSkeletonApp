# SinatraSkeletonApp

## Configuration

### General Configuration

The following environment variables are required for basic functionality of the app:

* RACK_ENV _Set to the appropriate development environment_
* SKELETON_APP_BASE_URL _Points to the application url (eg, http://localhost:9292), for resolving URIs in header responses_

### AWS Configuration

The app uses Amazon S3 for storing image files and for retrieving public and private certificate files for app authentication. Before configuring the app, create an S3 bucket and an AWS user with IAMS privileges for reading and writing on this bucket. Then set up the following variables for AWS configuration:

* SKELETON_APP_AWS_REGION _Eg, Oregon_
* SKELETON_APP_AWS_BUCKET _Eg, skeleton-app-development-bucket_
* SKELETON_APP_AWS_ACCESS_KEY_ID _Access key for the user_
* SKELETON_APP_AWS_SECRET_ACCESS_KEY _Secret for the user_

### OAuth Configuration

The app uses OAuth for API authentication. To configure:

1. Create a public key certificate file called 'public.pem'
- Create a private key certificate file called 'private.pem', optionally protected by a passphrase
- Create a new bucket on AWS S3 and upload these files

Then configure the following environment variables

* SKELETON_APP_CERTIFICATE_BUCKET
* SKELETON_APP_PRIVATE_KEY_PASSPHRASE _Passphrase for the public key file_

### Email Configuration

The app can optionally be configured to send email address verification and password reset emails. The app uses the email service 'Postmark'. To enable emails:

1. Create an account on Postmark using a private domain email address (public domain emails are not allowed to send emails via Postmark)
- Create a sender signature for this email address

Then configure the following environment variables:

* SKELETON_APP_EMAIL_ENABLED = yes _Set to "yes" if enabled_
* SKELETON_APP_POSTMARK_EMAIL_ADDRESS _Email address configured in postmark_
* POSTMARK_API_KEY _Sender signature api key generated by Postmark_
